<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="generator" content="SQL*Plus 11.2.0">
<title>BI-DBS - Michal Valenta(valenta) - Výstup SQL příkazů </title> <style type ='text/css'><!--body {background: #ffffc6} --></style>
</head>
<body <h2>BI-DBS - středa 14:30, lichý týden, paraleka 1 - Michal Valenta - Výstup SQL příkazů</h2>>
SQL&gt; 
<br>
SQL&gt; 
<br>
SQL&gt; 	       --KOD DOTAZU: d1
<br>
SQL&gt;  -- Jmena zelenych lodi.
<br>
SQL&gt; 
<br>
SQL&gt; SELECT DISTINCT JMENOL
<br>
  2  FROM LOD
<br>
  3  WHERE BARVA = 'zelená';
<br>
<p>
<table border='1' width='90%' align='center' summary='Script output'>
<tr>
<th scope="col">
JMENOL
</th>
</tr>
<tr>
<td>
Anne
</td>
</tr>
<tr>
<td>
Carmen
</td>
</tr>
<tr>
<td>
LodProPriklad7.2
</td>
</tr>
</table>
<p>

SQL&gt; 
<br>
SQL&gt; 
<br>
SQL&gt; 
<br>
SQL&gt; 	       --KOD DOTAZU: d2
<br>
SQL&gt;  -- Jména zákazníků, kteří si rezervovali alespoň jeden modrý parník.
<br>
SQL&gt; 
<br>
SQL&gt; SELECT ZAKAZNIK.JMENOZ, zakaznik.prijmeni
<br>
  2  FROM ZAKAZNIK JOIN REZERVACE USING(ZID)
<br>
  3  	  JOIN LOD USING(LODID)
<br>
  4  WHERE LOD.LTYP = 'parník' AND
<br>
  5  	   LOD.barva= 'modrá';
<br>
<p>
<table border='1' width='90%' align='center' summary='Script output'>
<tr>
<th scope="col">
JMENOZ
</th>
<th scope="col">
PRIJMENI
</th>
</tr>
<tr>
<td>
Ford
</td>
<td>
Ford
</td>
</tr>
<tr>
<td>
Ford
</td>
<td>
Ford
</td>
</tr>
<tr>
<td>
Martin
</td>
<td>
Martin
</td>
</tr>
</table>
<p>

SQL&gt; 
<br>
SQL&gt; 
<br>
SQL&gt; 
<br>
SQL&gt; 	       --KOD DOTAZU: d3
<br>
SQL&gt;  -- Seznam typů lodí, které byly na plavbě s průvodcem.
<br>
SQL&gt; 
<br>
SQL&gt; SELECT UNIQUE LTYP
<br>
  2  FROM LOD L JOIN PLAVBA_S_PRUVODCEM PSP ON(L.LODID= PSP.ID_LOD);
<br>
<p>
<table border='1' width='90%' align='center' summary='Script output'>
<tr>
<th scope="col">
LTYP
</th>
</tr>
<tr>
<td>
&nbsp;
</td>
</tr>
<tr>
<td>
parník
</td>
</tr>
<tr>
<td>
klipr
</td>
</tr>
<tr>
<td>
ponorka
</td>
</tr>
</table>
<p>

SQL&gt; 
<br>
SQL&gt; 
<br>
SQL&gt; 
<br>
SQL&gt; 	       --KOD DOTAZU: d4
<br>
SQL&gt;  -- Lodě (všechny atributy), které pokryly nějaké pravidelné spoje a byly také na některé plavbě s průvodcem.
<br>
SQL&gt; 
<br>
SQL&gt; SELECT L.*
<br>
  2  FROM LOD L
<br>
  3  WHERE L.LODID IN (SELECT LODID
<br>
  4  		       FROM POKRYTI P)
<br>
  5  INTERSECT
<br>
  6  SELECT L.*
<br>
  7  FROM LOD L
<br>
  8  WHERE EXISTS (SELECT 1 FROM PLAVBA_S_PRUVODCEM
<br>
  9  		   WHERE PLAVBA_S_PRUVODCEM.ID_LOD = L.LODID);
<br>
<p>
<table border='1' width='90%' align='center' summary='Script output'>
<tr>
<th scope="col">
LODID
</th>
<th scope="col">
JMENOL
</th>
<th scope="col">
LTYP
</th>
<th scope="col">
BARVA
</th>
<th scope="col">
POCET_MIST
</th>
<th scope="col">
ID_ZAZEMI
</th>
</tr>
<tr>
<td align="right">
         1
</td>
<td>
Chloe
</td>
<td>
ponorka
</td>
<td>
žlutá
</td>
<td align="right">
       100
</td>
<td align="right">
       599
</td>
</tr>
<tr>
<td align="right">
         2
</td>
<td>
Mariane
</td>
<td>
klipr
</td>
<td>
modrá
</td>
<td align="right">
        50
</td>
<td align="right">
       699
</td>
</tr>
<tr>
<td align="right">
         6
</td>
<td>
Carmen
</td>
<td>
klipr
</td>
<td>
zelená
</td>
<td align="right">
       100
</td>
<td align="right">
       699
</td>
</tr>
<tr>
<td align="right">
         8
</td>
<td>
Charibda
</td>
<td>
parník
</td>
<td>
modrá
</td>
<td align="right">
       145
</td>
<td align="right">
       899
</td>
</tr>
<tr>
<td align="right">
         9
</td>
<td>
Anne
</td>
<td>
&nbsp;
</td>
<td>
zelená
</td>
<td align="right">
       100
</td>
<td align="right">
       899
</td>
</tr>
<tr>
<td align="right">
        10
</td>
<td>
Lilien
</td>
<td>
klipr
</td>
<td>
modrá
</td>
<td align="right">
        10
</td>
<td align="right">
       699
</td>
</tr>
</table>
<p>

6 rows selected.<br>
<br>


SQL&gt; 
<br>
SQL&gt; 
<br>
SQL&gt; 
<br>
SQL&gt; 	       --KOD DOTAZU: d5
<br>
SQL&gt;  -- Lodě, (všechny atributy), které pokryly nějaký pravidelný spj a neby byly na plavbě s průvodcem.
<br>
SQL&gt; 
<br>
SQL&gt; SELECT L.*
<br>
  2  FROM LOD L JOIN POKRYTI P ON (L.LODID = P.LODID)
<br>
  3  UNION
<br>
  4  SELECT L.*
<br>
  5  FROM LOD L JOIN PLAVBA_S_PRUVODCEM P ON (L.LODID = P.ID_LOD);
<br>
<p>
<table border='1' width='90%' align='center' summary='Script output'>
<tr>
<th scope="col">
LODID
</th>
<th scope="col">
JMENOL
</th>
<th scope="col">
LTYP
</th>
<th scope="col">
BARVA
</th>
<th scope="col">
POCET_MIST
</th>
<th scope="col">
ID_ZAZEMI
</th>
</tr>
<tr>
<td align="right">
         1
</td>
<td>
Chloe
</td>
<td>
ponorka
</td>
<td>
žlutá
</td>
<td align="right">
       100
</td>
<td align="right">
       599
</td>
</tr>
<tr>
<td align="right">
         2
</td>
<td>
Mariane
</td>
<td>
klipr
</td>
<td>
modrá
</td>
<td align="right">
        50
</td>
<td align="right">
       699
</td>
</tr>
<tr>
<td align="right">
         5
</td>
<td>
Shark
</td>
<td>
ponorka
</td>
<td>
pink
</td>
<td align="right">
        22
</td>
<td align="right">
       599
</td>
</tr>
<tr>
<td align="right">
         6
</td>
<td>
Carmen
</td>
<td>
klipr
</td>
<td>
zelená
</td>
<td align="right">
       100
</td>
<td align="right">
       699
</td>
</tr>
<tr>
<td align="right">
         8
</td>
<td>
Charibda
</td>
<td>
parník
</td>
<td>
modrá
</td>
<td align="right">
       145
</td>
<td align="right">
       899
</td>
</tr>
<tr>
<td align="right">
         9
</td>
<td>
Anne
</td>
<td>
&nbsp;
</td>
<td>
zelená
</td>
<td align="right">
       100
</td>
<td align="right">
       899
</td>
</tr>
<tr>
<td align="right">
        10
</td>
<td>
Lilien
</td>
<td>
klipr
</td>
<td>
modrá
</td>
<td align="right">
        10
</td>
<td align="right">
       699
</td>
</tr>
</table>
<p>

7 rows selected.<br>
<br>


SQL&gt; 
<br>
SQL&gt; 
<br>
SQL&gt; 
<br>
SQL&gt; 	       --KOD DOTAZU: d6
<br>
SQL&gt;  -- Lodě (všechny atributy), které nebyly rezervovány
<br>
SQL&gt; 
<br>
SQL&gt; SELECT *
<br>
  2  FROM LOD L
<br>
  3  WHERE L.LODID NOT IN (SELECT LODID
<br>
  4  			   FROM REZERVACE);
<br>
<p>
<table border='1' width='90%' align='center' summary='Script output'>
<tr>
<th scope="col">
LODID
</th>
<th scope="col">
JMENOL
</th>
<th scope="col">
LTYP
</th>
<th scope="col">
BARVA
</th>
<th scope="col">
POCET_MIST
</th>
<th scope="col">
ID_ZAZEMI
</th>
</tr>
<tr>
<td align="right">
         6
</td>
<td>
Carmen
</td>
<td>
klipr
</td>
<td>
zelená
</td>
<td align="right">
       100
</td>
<td align="right">
       699
</td>
</tr>
<tr>
<td align="right">
         9
</td>
<td>
Anne
</td>
<td>
&nbsp;
</td>
<td>
zelená
</td>
<td align="right">
       100
</td>
<td align="right">
       899
</td>
</tr>
<tr>
<td align="right">
        11
</td>
<td>
Anička
</td>
<td>
plachetnice
</td>
<td>
růžová
</td>
<td align="right">
        10
</td>
<td align="right">
       799
</td>
</tr>
<tr>
<td align="right">
        13
</td>
<td>
LodProPriklad7.1
</td>
<td>
typProPriklad7
</td>
<td>
zrzavá
</td>
<td align="right">
        25
</td>
<td align="right">
&nbsp;
</td>
</tr>
<tr>
<td align="right">
        14
</td>
<td>
LodProPriklad7.2
</td>
<td>
typProPriklad7
</td>
<td>
zelená
</td>
<td align="right">
        25
</td>
<td align="right">
&nbsp;
</td>
</tr>
</table>
<p>

SQL&gt; 
<br>
SQL&gt; 
<br>
SQL&gt; 
<br>
SQL&gt; 	       --KOD DOTAZU: d7
<br>
SQL&gt;  -- Typy lodí, které pokrývají pouze pravidelné spoje.
<br>
SQL&gt; 
<br>
SQL&gt; Select distinct LTYP from
<br>
  2  ( Select L.*
<br>
  3    FROM LOD L
<br>
  4    where exists (select LODID from POKRYTI where pokryti.lodid = l.lodid)
<br>
  5    MINUS
<br>
  6    Select L2.*
<br>
  7    FROM LOD L2
<br>
  8    where exists (select ID_LOD from PLAVBA_S_PRUVODCEM where plavba_s_pruvodcem.id_lod=l2.lodid )
<br>
  9    MINUS
<br>
 10    Select L.*
<br>
 11    FROM LOD L
<br>
 12    where exists (select 1 from REZERVACE R where R.LODID=L.LODID)
<br>
 13  );
<br>

no rows selected

<br>
SQL&gt; 
<br>
SQL&gt; 
<br>
SQL&gt; 
<br>
SQL&gt; 	       --KOD DOTAZU: d8
<br>
SQL&gt;  -- Zákazníci (id_z, jméno), kteří si rezervovali každou zelenou loď.
<br>
SQL&gt; 
<br>
SQL&gt; WITH
<br>
  2  T1  AS (SELECT LODID,ZID
<br>
  3  	     FROM LOD CROSS JOIN ZAKAZNIK
<br>
  4  	     WHERE BARVA = 'zelená' ),
<br>
  5  T2  AS (SELECT UNIQUE LODID,ZID FROM REZERVACE),
<br>
  6  T31 AS (SELECT * FROM  T1 MINUS SELECT * FROM T2),
<br>
  7  T32 AS (SELECT UNIQUE ZID FROM T31),
<br>
  8  T4  AS (SELECT UNIQUE ZID FROM REZERVACE),
<br>
  9  T5  AS (SELECT * From T4 Where T4.ZID Not In (Select ZID From T32))
<br>
 10  Select *
<br>
 11  From T5 Join zakaznik Using(ZID);
<br>

no rows selected

<br>
SQL&gt; 
<br>
SQL&gt; 
<br>
SQL&gt; 
<br>
SQL&gt; 	       --KOD DOTAZU: d9
<br>
SQL&gt;  -- Dvojice zákazníků, kteří bydlí na stejné adrese.
<br>
SQL&gt; 
<br>
SQL&gt; Select cast(Z1.zid||' '||Z1.jmenoz||' '||Z1.prijmeni||' sousedí s '||
<br>
  2  		 Z2.zid||' '||Z2.jmenoz||' '||Z1.prijmeni as varchar(60)) as sousede
<br>
  3  From zakaznik Z1 Join zakaznik Z2 On (Z1.adresa=Z2.adresa and
<br>
  4  					   Z1.zid &lt; Z2.zid);
<br>

no rows selected

<br>
SQL&gt; 
<br>
SQL&gt; 
<br>
SQL&gt; 
<br>
SQL&gt; 	       --KOD DOTAZU: d10
<br>
SQL&gt;  -- Průměrný věk lodníků.
<br>
SQL&gt; 
<br>
SQL&gt; Select ROUND(AVG(vek),2)
<br>
  2  From namornik;
<br>
<p>
<table border='1' width='90%' align='center' summary='Script output'>
<tr>
<th scope="col">
ROUND(AVG(VEK),2)
</th>
</tr>
<tr>
<td align="right">
   1119.33
</td>
</tr>
</table>
<p>

SQL&gt; 
<br>
SQL&gt; 
<br>
SQL&gt; 
<br>
SQL&gt; 	       --KOD DOTAZU: d11
<br>
SQL&gt;  -- Cekový počet typů lodí, počet různých typů lodí a celkový počet míst na všech lodích.
<br>
SQL&gt; 
<br>
SQL&gt; Select count(distinct ltyp) pocet_typu_lodi
<br>
  2  	  , count(distinct barva) pocet_ruznych_barev
<br>
  3  	  , sum(pocet_mist) celkovy_pocet_mist
<br>
  4  From LOD;
<br>
<p>
<table border='1' width='90%' align='center' summary='Script output'>
<tr>
<th scope="col">
POCET_TYPU_LODI
</th>
<th scope="col">
POCET_RUZNYCH_BAREV
</th>
<th scope="col">
CELKOVY_POCET_MIST
</th>
</tr>
<tr>
<td align="right">
         5
</td>
<td align="right">
         8
</td>
<td align="right">
       747
</td>
</tr>
</table>
<p>

SQL&gt; 
<br>
SQL&gt; 
<br>
SQL&gt; 
<br>
SQL&gt; 	       --KOD DOTAZU: d12
<br>
SQL&gt;  -- Lodníci, kteří byli na plavbě s průvodcem méně než 4x.
<br>
SQL&gt; 
<br>
SQL&gt; Select *
<br>
  2  From namornik N
<br>
  3  Where (Select count(*)
<br>
  4  	    From PLAVBA_S_PRUVODCEM PSP
<br>
  5  	    Where N.nid = PSP.nid) &lt; 4;
<br>
<p>
<table border='1' width='90%' align='center' summary='Script output'>
<tr>
<th scope="col">
NID
</th>
<th scope="col">
JMENON
</th>
<th scope="col">
VEK
</th>
<th scope="col">
HODNOST
</th>
<th scope="col">
PLAT
</th>
</tr>
<tr>
<td align="right">
         1
</td>
<td>
Dustin
</td>
<td align="right">
        45
</td>
<td>
7
</td>
<td align="right">
      7000
</td>
</tr>
<tr>
<td align="right">
         3
</td>
<td>
Rusty
</td>
<td align="right">
        35
</td>
<td>
10
</td>
<td align="right">
      6000
</td>
</tr>
<tr>
<td align="right">
         4
</td>
<td>
Yuppy
</td>
<td align="right">
        35
</td>
<td>
9
</td>
<td align="right">
      2000
</td>
</tr>
<tr>
<td align="right">
         5
</td>
<td>
Guppy
</td>
<td align="right">
        35
</td>
<td>
5
</td>
<td align="right">
      4500
</td>
</tr>
<tr>
<td align="right">
         7
</td>
<td>
Horatio
</td>
<td align="right">
        35
</td>
<td>
7
</td>
<td align="right">
      2500
</td>
</tr>
<tr>
<td align="right">
         8
</td>
<td>
Brutus
</td>
<td align="right">
        33
</td>
<td>
1
</td>
<td align="right">
      1350
</td>
</tr>
<tr>
<td align="right">
        10
</td>
<td>
John
</td>
<td align="right">
       118
</td>
<td>
6
</td>
<td align="right">
     14000
</td>
</tr>
<tr>
<td align="right">
        11
</td>
<td>
Charon
</td>
<td align="right">
       999
</td>
<td>
4
</td>
<td align="right">
      6800
</td>
</tr>
<tr>
<td align="right">
        13
</td>
<td>
Halaska
</td>
<td align="right">
     12000
</td>
<td>
1
</td>
<td align="right">
&nbsp;
</td>
</tr>
</table>
<p>

9 rows selected.<br>
<br>


SQL&gt; -- alternativni reseni
<br>
SQL&gt; Select nid,N.JMENON,N.VEK,N.HODNOST,N.PLAT
<br>
  2  From namornik N Left Outer join PLAVBA_S_PRUVODCEM P Using(nid)
<br>
  3  GROUP BY nid, N.JMENON, N.VEK, N.HODNOST, N.PLAT
<br>
  4  Having  count(ID_LOD) &lt; 4;
<br>
<p>
<table border='1' width='90%' align='center' summary='Script output'>
<tr>
<th scope="col">
NID
</th>
<th scope="col">
JMENON
</th>
<th scope="col">
VEK
</th>
<th scope="col">
HODNOST
</th>
<th scope="col">
PLAT
</th>
</tr>
<tr>
<td align="right">
        13
</td>
<td>
Halaska
</td>
<td align="right">
     12000
</td>
<td>
1
</td>
<td align="right">
&nbsp;
</td>
</tr>
<tr>
<td align="right">
         1
</td>
<td>
Dustin
</td>
<td align="right">
        45
</td>
<td>
7
</td>
<td align="right">
      7000
</td>
</tr>
<tr>
<td align="right">
         8
</td>
<td>
Brutus
</td>
<td align="right">
        33
</td>
<td>
1
</td>
<td align="right">
      1350
</td>
</tr>
<tr>
<td align="right">
        11
</td>
<td>
Charon
</td>
<td align="right">
       999
</td>
<td>
4
</td>
<td align="right">
      6800
</td>
</tr>
<tr>
<td align="right">
         4
</td>
<td>
Yuppy
</td>
<td align="right">
        35
</td>
<td>
9
</td>
<td align="right">
      2000
</td>
</tr>
<tr>
<td align="right">
        10
</td>
<td>
John
</td>
<td align="right">
       118
</td>
<td>
6
</td>
<td align="right">
     14000
</td>
</tr>
<tr>
<td align="right">
         5
</td>
<td>
Guppy
</td>
<td align="right">
        35
</td>
<td>
5
</td>
<td align="right">
      4500
</td>
</tr>
<tr>
<td align="right">
         3
</td>
<td>
Rusty
</td>
<td align="right">
        35
</td>
<td>
10
</td>
<td align="right">
      6000
</td>
</tr>
<tr>
<td align="right">
         7
</td>
<td>
Horatio
</td>
<td align="right">
        35
</td>
<td>
7
</td>
<td align="right">
      2500
</td>
</tr>
</table>
<p>

9 rows selected.<br>
<br>


SQL&gt; 
<br>
SQL&gt; 
<br>
SQL&gt; 
<br>
SQL&gt; 	       --KOD DOTAZU: d13
<br>
SQL&gt;  -- Lodníci, kteří pokryli méně než 3 různé pravidelné linky včetně těch, kteří nepokryli žádnou.
<br>
SQL&gt; 
<br>
SQL&gt; Select N.*,
<br>
  2  	    (Select count(DISTINCT LID)
<br>
  3  	     From pokryti P
<br>
  4  	     Where P.nid = N.nid) pocet_ruznych_linek
<br>
  5  From namornik N
<br>
  6  Where (Select count(DISTINCT LID)
<br>
  7  	    From pokryti P
<br>
  8  	    Where P.nid = N.nid) &lt; 3;
<br>
<p>
<table border='1' width='90%' align='center' summary='Script output'>
<tr>
<th scope="col">
NID
</th>
<th scope="col">
JMENON
</th>
<th scope="col">
VEK
</th>
<th scope="col">
HODNOST
</th>
<th scope="col">
PLAT
</th>
<th scope="col">
POCET_RUZNYCH_LINEK
</th>
</tr>
<tr>
<td align="right">
         1
</td>
<td>
Dustin
</td>
<td align="right">
        45
</td>
<td>
7
</td>
<td align="right">
      7000
</td>
<td align="right">
         0
</td>
</tr>
<tr>
<td align="right">
         2
</td>
<td>
Lubber
</td>
<td align="right">
        55
</td>
<td>
8
</td>
<td align="right">
      3000
</td>
<td align="right">
         2
</td>
</tr>
<tr>
<td align="right">
         4
</td>
<td>
Yuppy
</td>
<td align="right">
        35
</td>
<td>
9
</td>
<td align="right">
      2000
</td>
<td align="right">
         2
</td>
</tr>
<tr>
<td align="right">
         5
</td>
<td>
Guppy
</td>
<td align="right">
        35
</td>
<td>
5
</td>
<td align="right">
      4500
</td>
<td align="right">
         0
</td>
</tr>
<tr>
<td align="right">
         6
</td>
<td>
Zorba
</td>
<td align="right">
        16
</td>
<td>
10
</td>
<td align="right">
      7500
</td>
<td align="right">
         0
</td>
</tr>
<tr>
<td align="right">
         7
</td>
<td>
Horatio
</td>
<td align="right">
        35
</td>
<td>
7
</td>
<td align="right">
      2500
</td>
<td align="right">
         0
</td>
</tr>
<tr>
<td align="right">
         8
</td>
<td>
Brutus
</td>
<td align="right">
        33
</td>
<td>
1
</td>
<td align="right">
      1350
</td>
<td align="right">
         2
</td>
</tr>
<tr>
<td align="right">
         9
</td>
<td>
Marco
</td>
<td align="right">
        26
</td>
<td>
2
</td>
<td align="right">
      5200
</td>
<td align="right">
         2
</td>
</tr>
<tr>
<td align="right">
        10
</td>
<td>
John
</td>
<td align="right">
       118
</td>
<td>
6
</td>
<td align="right">
     14000
</td>
<td align="right">
         2
</td>
</tr>
<tr>
<td align="right">
        13
</td>
<td>
Halaska
</td>
<td align="right">
     12000
</td>
<td>
1
</td>
<td align="right">
&nbsp;
</td>
<td align="right">
         0
</td>
</tr>
</table>
<p>

10 rows selected.<br>
<br>


SQL&gt; -- alternativni reseni
<br>
SQL&gt; SELECT NID,N.JMENON,N.VEK,N.HODNOST,N.PLAT,COUNT(LODID)
<br>
  2  FROM NAMORNIK N Left Outer Join POKRYTI P Using (Nid)
<br>
  3  GROUP BY NID,N.JMENON,N.VEK,N.HODNOST,N.PLAT
<br>
  4  Having count (LODID) &lt; 3;
<br>
<p>
<table border='1' width='90%' align='center' summary='Script output'>
<tr>
<th scope="col">
NID
</th>
<th scope="col">
JMENON
</th>
<th scope="col">
VEK
</th>
<th scope="col">
HODNOST
</th>
<th scope="col">
PLAT
</th>
<th scope="col">
COUNT(LODID)
</th>
</tr>
<tr>
<td align="right">
        13
</td>
<td>
Halaska
</td>
<td align="right">
     12000
</td>
<td>
1
</td>
<td align="right">
&nbsp;
</td>
<td align="right">
         0
</td>
</tr>
<tr>
<td align="right">
         9
</td>
<td>
Marco
</td>
<td align="right">
        26
</td>
<td>
2
</td>
<td align="right">
      5200
</td>
<td align="right">
         2
</td>
</tr>
<tr>
<td align="right">
         1
</td>
<td>
Dustin
</td>
<td align="right">
        45
</td>
<td>
7
</td>
<td align="right">
      7000
</td>
<td align="right">
         0
</td>
</tr>
<tr>
<td align="right">
        10
</td>
<td>
John
</td>
<td align="right">
       118
</td>
<td>
6
</td>
<td align="right">
     14000
</td>
<td align="right">
         2
</td>
</tr>
<tr>
<td align="right">
         4
</td>
<td>
Yuppy
</td>
<td align="right">
        35
</td>
<td>
9
</td>
<td align="right">
      2000
</td>
<td align="right">
         2
</td>
</tr>
<tr>
<td align="right">
         5
</td>
<td>
Guppy
</td>
<td align="right">
        35
</td>
<td>
5
</td>
<td align="right">
      4500
</td>
<td align="right">
         0
</td>
</tr>
<tr>
<td align="right">
         6
</td>
<td>
Zorba
</td>
<td align="right">
        16
</td>
<td>
10
</td>
<td align="right">
      7500
</td>
<td align="right">
         0
</td>
</tr>
<tr>
<td align="right">
         2
</td>
<td>
Lubber
</td>
<td align="right">
        55
</td>
<td>
8
</td>
<td align="right">
      3000
</td>
<td align="right">
         2
</td>
</tr>
<tr>
<td align="right">
         7
</td>
<td>
Horatio
</td>
<td align="right">
        35
</td>
<td>
7
</td>
<td align="right">
      2500
</td>
<td align="right">
         0
</td>
</tr>
</table>
<p>

9 rows selected.<br>
<br>


SQL&gt; 
<br>
SQL&gt; 
<br>
SQL&gt; 
<br>
SQL&gt; 	       --KOD DOTAZU: d14
<br>
SQL&gt;  -- Pro každého lodníka počet jeho plaveb s průvodcem.
<br>
SQL&gt; 
<br>
SQL&gt; elect N.*,
<br>
SP2-0042: unknown command &quot;elect N.*,&quot; - rest of line ignored.
<br>
SQL&gt; 	    (Select count(*)
<br>
  2  	    From PLAVBA_S_PRUVODCEM PSP
<br>
  3  	    Where N.nid = PSP.nid) pocet_PSP
<br>
  4  From namornik N;
<br>
<pre>
       Where N.nid = PSP.nid) pocet_PSP
                              *
</pre>
ERROR at line 3:
<br>
ORA-00933: SQL command not properly ended 
<br>


SQL&gt; -- alternativa
<br>
SQL&gt; Select nid,N.JMENON,N.VEK,N.HODNOST,N.PLAT,
<br>
  2  	    count(ID_LOD) pocet_PSP
<br>
  3  From namornik N Left Outer join PLAVBA_S_PRUVODCEM P
<br>
  4  	  Using(nid)
<br>
  5  GROUP BY nid, N.JMENON, N.VEK, N.HODNOST, N.PLAT;
<br>
<p>
<table border='1' width='90%' align='center' summary='Script output'>
<tr>
<th scope="col">
NID
</th>
<th scope="col">
JMENON
</th>
<th scope="col">
VEK
</th>
<th scope="col">
HODNOST
</th>
<th scope="col">
PLAT
</th>
<th scope="col">
POCET_PSP
</th>
</tr>
<tr>
<td align="right">
        13
</td>
<td>
Halaska
</td>
<td align="right">
     12000
</td>
<td>
1
</td>
<td align="right">
&nbsp;
</td>
<td align="right">
         0
</td>
</tr>
<tr>
<td align="right">
         9
</td>
<td>
Marco
</td>
<td align="right">
        26
</td>
<td>
2
</td>
<td align="right">
      5200
</td>
<td align="right">
         5
</td>
</tr>
<tr>
<td align="right">
         1
</td>
<td>
Dustin
</td>
<td align="right">
        45
</td>
<td>
7
</td>
<td align="right">
      7000
</td>
<td align="right">
         1
</td>
</tr>
<tr>
<td align="right">
         8
</td>
<td>
Brutus
</td>
<td align="right">
        33
</td>
<td>
1
</td>
<td align="right">
      1350
</td>
<td align="right">
         0
</td>
</tr>
<tr>
<td align="right">
        11
</td>
<td>
Charon
</td>
<td align="right">
       999
</td>
<td>
4
</td>
<td align="right">
      6800
</td>
<td align="right">
         0
</td>
</tr>
<tr>
<td align="right">
         4
</td>
<td>
Yuppy
</td>
<td align="right">
        35
</td>
<td>
9
</td>
<td align="right">
      2000
</td>
<td align="right">
         0
</td>
</tr>
<tr>
<td align="right">
        10
</td>
<td>
John
</td>
<td align="right">
       118
</td>
<td>
6
</td>
<td align="right">
     14000
</td>
<td align="right">
         0
</td>
</tr>
<tr>
<td align="right">
         5
</td>
<td>
Guppy
</td>
<td align="right">
        35
</td>
<td>
5
</td>
<td align="right">
      4500
</td>
<td align="right">
         0
</td>
</tr>
<tr>
<td align="right">
         6
</td>
<td>
Zorba
</td>
<td align="right">
        16
</td>
<td>
10
</td>
<td align="right">
      7500
</td>
<td align="right">
         7
</td>
</tr>
<tr>
<td align="right">
         2
</td>
<td>
Lubber
</td>
<td align="right">
        55
</td>
<td>
8
</td>
<td align="right">
      3000
</td>
<td align="right">
         4
</td>
</tr>
<tr>
<td align="right">
         3
</td>
<td>
Rusty
</td>
<td align="right">
        35
</td>
<td>
10
</td>
<td align="right">
      6000
</td>
<td align="right">
         1
</td>
</tr>
<tr>
<td align="right">
         7
</td>
<td>
Horatio
</td>
<td align="right">
        35
</td>
<td>
7
</td>
<td align="right">
      2500
</td>
<td align="right">
         1
</td>
</tr>
</table>
<p>

12 rows selected.<br>
<br>


SQL&gt; 
<br>
SQL&gt; 
<br>
SQL&gt; 
<br>
SQL&gt; 	       --KOD DOTAZU: d15
<br>
SQL&gt;  -- Jména lodníků mladších 40 let, kteří mají za sebou alespoň 3 plavby s průvodcem na lodi typu klipr. Výstup bude seřazen dle jmen lodníků.
<br>
SQL&gt; 
<br>
SQL&gt; Select N.nid,N.JMENON
<br>
  2  From Namornik N
<br>
  3  Where (Select count(*)
<br>
  4  	    From PLAVBA_S_PRUVODCEM PSP Join LOD L On(LODID= ID_LOD)
<br>
  5  	    Where PSP.nid = N.nid
<br>
  6  		  and L.Ltyp ='klipr'
<br>
  7  	   ) &gt;=3
<br>
  8  	   and	N.vek &lt;40
<br>
  9  order by N.JMENON desc;
<br>
<p>
<table border='1' width='90%' align='center' summary='Script output'>
<tr>
<th scope="col">
NID
</th>
<th scope="col">
JMENON
</th>
</tr>
<tr>
<td align="right">
         9
</td>
<td>
Marco
</td>
</tr>
</table>
<p>

SQL&gt; -- alternativa
<br>
SQL&gt; Select nid,N.JMENON
<br>
  2  From Namornik N Join PLAVBA_S_PRUVODCEM PSP Using (nid)
<br>
  3  	  Join lod L On (LODID= ID_LOD)
<br>
  4  Where L.Ltyp ='klipr' and N.vek &lt;40
<br>
  5  Group By nid,N.JMENON
<br>
  6  having count(*) &gt;= 3
<br>
  7  order by N.JMENON desc;
<br>
<p>
<table border='1' width='90%' align='center' summary='Script output'>
<tr>
<th scope="col">
NID
</th>
<th scope="col">
JMENON
</th>
</tr>
<tr>
<td align="right">
         9
</td>
<td>
Marco
</td>
</tr>
</table>
<p>

SQL&gt; 
<br>
SQL&gt; 
<br>
SQL&gt; 
<br>
SQL&gt; 	       --KOD DOTAZU: d16
<br>
SQL&gt;  -- Námořníkům, kteří mají za sebou alespoň 4 pokrytí spoje zvedněte plat o 15%.
<br>
SQL&gt; 
<br>
SQL&gt; Update namornik N
<br>
  2  Set plat = plat * 1.15
<br>
  3  where (Select count (lodid)
<br>
  4  	    From pokryti P
<br>
  5  	    Where P.nid = N.nid) &gt; 4;
<br>

1 row updated.<br>
<br>


Commit complete.
<br>
SQL&gt; 
<br>
SQL&gt; 
<br>
SQL&gt; 
<br>
SQL&gt; 	       --KOD DOTAZU: d17
<br>
SQL&gt;  -- K tabulce LODNIK p5id8me sloupec pocet_plaveb_s_pruvodcem a prvedeme jednorázový dopočet hodnot tohoto sloupce.
<br>
SQL&gt; 
<br>
SQL&gt; -- pridani sloupce
<br>
SQL&gt; Alter Table NAMORNIK
<br>
  2  Add (pocet_plaveb_s_pruvodcem integer Default 0);
<br>

Table altered.<br>
<br>


SQL&gt; -- dopocitani
<br>
SQL&gt; Update namornik N
<br>
  2  Set pocet_plaveb_s_pruvodcem = (Select count(*)
<br>
  3  				     From PLAVBA_S_PRUVODCEM PSP
<br>
  4  				     Where PSP.nid=N.nid);
<br>

12 rows updated.<br>
<br>


Commit complete.
<br>
SQL&gt; Commit;
<br>

Commit complete.<br>
<br>


SQL&gt; -- overeni
<br>
SQL&gt; select *
<br>
  2  from namornik;
<br>
<p>
<table border='1' width='90%' align='center' summary='Script output'>
<tr>
<th scope="col">
NID
</th>
<th scope="col">
JMENON
</th>
<th scope="col">
VEK
</th>
<th scope="col">
HODNOST
</th>
<th scope="col">
PLAT
</th>
<th scope="col">
POCET_PLAVEB_S_PRUVODCEM
</th>
</tr>
<tr>
<td align="right">
         1
</td>
<td>
Dustin
</td>
<td align="right">
        45
</td>
<td>
7
</td>
<td align="right">
      7000
</td>
<td align="right">
         1
</td>
</tr>
<tr>
<td align="right">
         2
</td>
<td>
Lubber
</td>
<td align="right">
        55
</td>
<td>
8
</td>
<td align="right">
      3000
</td>
<td align="right">
         4
</td>
</tr>
<tr>
<td align="right">
         3
</td>
<td>
Rusty
</td>
<td align="right">
        35
</td>
<td>
10
</td>
<td align="right">
      6000
</td>
<td align="right">
         1
</td>
</tr>
<tr>
<td align="right">
         4
</td>
<td>
Yuppy
</td>
<td align="right">
        35
</td>
<td>
9
</td>
<td align="right">
      2000
</td>
<td align="right">
         0
</td>
</tr>
<tr>
<td align="right">
         5
</td>
<td>
Guppy
</td>
<td align="right">
        35
</td>
<td>
5
</td>
<td align="right">
      4500
</td>
<td align="right">
         0
</td>
</tr>
<tr>
<td align="right">
         6
</td>
<td>
Zorba
</td>
<td align="right">
        16
</td>
<td>
10
</td>
<td align="right">
      7500
</td>
<td align="right">
         7
</td>
</tr>
<tr>
<td align="right">
         7
</td>
<td>
Horatio
</td>
<td align="right">
        35
</td>
<td>
7
</td>
<td align="right">
      2500
</td>
<td align="right">
         1
</td>
</tr>
<tr>
<td align="right">
         8
</td>
<td>
Brutus
</td>
<td align="right">
        33
</td>
<td>
1
</td>
<td align="right">
      1350
</td>
<td align="right">
         0
</td>
</tr>
<tr>
<td align="right">
         9
</td>
<td>
Marco
</td>
<td align="right">
        26
</td>
<td>
2
</td>
<td align="right">
      5200
</td>
<td align="right">
         5
</td>
</tr>
<tr>
<td align="right">
        10
</td>
<td>
John
</td>
<td align="right">
       118
</td>
<td>
6
</td>
<td align="right">
     14000
</td>
<td align="right">
         0
</td>
</tr>
<tr>
<td align="right">
        11
</td>
<td>
Charon
</td>
<td align="right">
       999
</td>
<td>
4
</td>
<td align="right">
      7820
</td>
<td align="right">
         0
</td>
</tr>
<tr>
<td align="right">
        13
</td>
<td>
Halaska
</td>
<td align="right">
     12000
</td>
<td>
1
</td>
<td align="right">
&nbsp;
</td>
<td align="right">
         0
</td>
</tr>
</table>
<p>

12 rows selected.<br>
<br>


SQL&gt; -- uklid
<br>
SQL&gt; alter table namornik drop column pocet_plaveb_s_pruvodcem;
<br>

Table altered.<br>
<br>


SQL&gt; select *
<br>
  2  from namornik;
<br>
<p>
<table border='1' width='90%' align='center' summary='Script output'>
<tr>
<th scope="col">
NID
</th>
<th scope="col">
JMENON
</th>
<th scope="col">
VEK
</th>
<th scope="col">
HODNOST
</th>
<th scope="col">
PLAT
</th>
</tr>
<tr>
<td align="right">
         1
</td>
<td>
Dustin
</td>
<td align="right">
        45
</td>
<td>
7
</td>
<td align="right">
      7000
</td>
</tr>
<tr>
<td align="right">
         2
</td>
<td>
Lubber
</td>
<td align="right">
        55
</td>
<td>
8
</td>
<td align="right">
      3000
</td>
</tr>
<tr>
<td align="right">
         3
</td>
<td>
Rusty
</td>
<td align="right">
        35
</td>
<td>
10
</td>
<td align="right">
      6000
</td>
</tr>
<tr>
<td align="right">
         4
</td>
<td>
Yuppy
</td>
<td align="right">
        35
</td>
<td>
9
</td>
<td align="right">
      2000
</td>
</tr>
<tr>
<td align="right">
         5
</td>
<td>
Guppy
</td>
<td align="right">
        35
</td>
<td>
5
</td>
<td align="right">
      4500
</td>
</tr>
<tr>
<td align="right">
         6
</td>
<td>
Zorba
</td>
<td align="right">
        16
</td>
<td>
10
</td>
<td align="right">
      7500
</td>
</tr>
<tr>
<td align="right">
         7
</td>
<td>
Horatio
</td>
<td align="right">
        35
</td>
<td>
7
</td>
<td align="right">
      2500
</td>
</tr>
<tr>
<td align="right">
         8
</td>
<td>
Brutus
</td>
<td align="right">
        33
</td>
<td>
1
</td>
<td align="right">
      1350
</td>
</tr>
<tr>
<td align="right">
         9
</td>
<td>
Marco
</td>
<td align="right">
        26
</td>
<td>
2
</td>
<td align="right">
      5200
</td>
</tr>
<tr>
<td align="right">
        10
</td>
<td>
John
</td>
<td align="right">
       118
</td>
<td>
6
</td>
<td align="right">
     14000
</td>
</tr>
<tr>
<td align="right">
        11
</td>
<td>
Charon
</td>
<td align="right">
       999
</td>
<td>
4
</td>
<td align="right">
      7820
</td>
</tr>
<tr>
<td align="right">
        13
</td>
<td>
Halaska
</td>
<td align="right">
     12000
</td>
<td>
1
</td>
<td align="right">
&nbsp;
</td>
</tr>
</table>
<p>

12 rows selected.<br>
<br>


SQL&gt; 
<br>
SQL&gt; 
<br>
SQL&gt; 
<br>
SQL&gt; 	       --KOD DOTAZU: d18
<br>
SQL&gt;  -- Zákazníci, kteří si rezervovali každý parník s počtem míst větším než 150.
<br>
SQL&gt; 
<br>
SQL&gt; with
<br>
  2    T1 as (select distinct zid,lodid from REZERVACE)
<br>
  3  , T2 as (select zid,lodid from
<br>
  4  	       (Select ZID from ZAKAZNIK) cross join
<br>
  5  	       (select LODID from lod where LTYP= 'parník'and POCET_MIST &gt; 150)
<br>
  6  	     )
<br>
  7  , T3 as ((select * from T2) minus (select * from T1))
<br>
  8  , T4 as (select distinct zid from T3)
<br>
  9  Select *
<br>
 10  from zakaznik Z
<br>
 11  where not exists (select 1 from T3 where z.zid = T3.zid);
<br>
<pre>
          (Select ZID from ZAKAZNIK) cross join
                           *
</pre>
ERROR at line 4:
<br>
ORA-32035: unreferenced query name defined in WITH clause 
<br>


SQL&gt; 
<br>
SQL&gt; 
<br>
SQL&gt; 
<br>
SQL&gt; 	       --KOD DOTAZU: d19
<br>
SQL&gt;  -- Vytvoření pohledu se seznamem spojů, u nichž budou podrobnosti jejich linek.
<br>
SQL&gt; 
<br>
SQL&gt; create view vspoj as
<br>
  2  	    select lid,linka.strt,linka.cil,
<br>
  3  		   spoj.spid, spoj.scas
<br>
  4  	    from spoj natural join linka
<br>
  5  	    order by lid,spoj.scas;
<br>

View created.<br>
<br>


SQL&gt; 
<br>
SQL&gt; 	    -- vyber vsechny spoje, ktere by jely dnes po 12. hodine
<br>
SQL&gt; select strt, cil, trunc(current_date) + scas as kdy
<br>
  2  from vspoj
<br>
  3  where trunc(current_date) + scas &gt; trunc(current_date) + INTERVAL '12' HOUR(2)
<br>
  4  order by scas;
<br>
<p>
<table border='1' width='90%' align='center' summary='Script output'>
<tr>
<th scope="col">
STRT
</th>
<th scope="col">
CIL
</th>
<th scope="col">
KDY
</th>
</tr>
<tr>
<td>
Nová Pec
</td>
<td>
Hůrka
</td>
<td>
15.09.2013 12:12
</td>
</tr>
<tr>
<td>
Hůrka
</td>
<td>
Jestřabí
</td>
<td>
15.09.2013 13:10
</td>
</tr>
<tr>
<td>
Florenc
</td>
<td>
Skalka
</td>
<td>
15.09.2013 14:41
</td>
</tr>
<tr>
<td>
Depo Hostivař
</td>
<td>
Bezděkovská
</td>
<td>
15.09.2013 14:41
</td>
</tr>
<tr>
<td>
Dejvická
</td>
<td>
Letiště
</td>
<td>
15.09.2013 14:41
</td>
</tr>
<tr>
<td>
Sídliště Čakovice
</td>
<td>
Jesenická
</td>
<td>
15.09.2013 14:41
</td>
</tr>
<tr>
<td>
Sídliště Spořilov
</td>
<td>
Smíchovské nádraží
</td>
<td>
15.09.2013 14:41
</td>
</tr>
<tr>
<td>
Nádraží Hostivař
</td>
<td>
Tolstého
</td>
<td>
15.09.2013 14:41
</td>
</tr>
<tr>
<td>
Chodov
</td>
<td>
Poliklinika Mazurská
</td>
<td>
15.09.2013 14:41
</td>
</tr>
<tr>
<td>
Bořislavka
</td>
<td>
Hradčanská
</td>
<td>
15.09.2013 14:41
</td>
</tr>
<tr>
<td>
Florenc
</td>
<td>
Koleje Jižní Město
</td>
<td>
15.09.2013 14:41
</td>
</tr>
<tr>
<td>
Skalka
</td>
<td>
Spořilov
</td>
<td>
15.09.2013 14:41
</td>
</tr>
<tr>
<td>
Dejvická
</td>
<td>
Letiště
</td>
<td>
15.09.2013 15:11
</td>
</tr>
<tr>
<td>
Sídliště Spořilov
</td>
<td>
Smíchovské nádraží
</td>
<td>
15.09.2013 15:11
</td>
</tr>
<tr>
<td>
Skalka
</td>
<td>
Spořilov
</td>
<td>
15.09.2013 15:11
</td>
</tr>
<tr>
<td>
Nádraží Hostivař
</td>
<td>
Tolstého
</td>
<td>
15.09.2013 15:11
</td>
</tr>
<tr>
<td>
Bořislavka
</td>
<td>
Hradčanská
</td>
<td>
15.09.2013 15:11
</td>
</tr>
<tr>
<td>
Depo Hostivař
</td>
<td>
Bezděkovská
</td>
<td>
15.09.2013 15:11
</td>
</tr>
<tr>
<td>
Sídliště Čakovice
</td>
<td>
Jesenická
</td>
<td>
15.09.2013 15:11
</td>
</tr>
<tr>
<td>
Chodov
</td>
<td>
Poliklinika Mazurská
</td>
<td>
15.09.2013 15:11
</td>
</tr>
<tr>
<td>
Florenc
</td>
<td>
Skalka
</td>
<td>
15.09.2013 15:11
</td>
</tr>
<tr>
<td>
Florenc
</td>
<td>
Koleje Jižní Město
</td>
<td>
15.09.2013 15:11
</td>
</tr>
<tr>
<td>
Florenc
</td>
<td>
Skalka
</td>
<td>
15.09.2013 15:31
</td>
</tr>
<tr>
<td>
Sídliště Spořilov
</td>
<td>
Smíchovské nádraží
</td>
<td>
15.09.2013 15:31
</td>
</tr>
<tr>
<td>
Sídliště Čakovice
</td>
<td>
Jesenická
</td>
<td>
15.09.2013 15:31
</td>
</tr>
<tr>
<td>
Chodov
</td>
<td>
Poliklinika Mazurská
</td>
<td>
15.09.2013 15:31
</td>
</tr>
<tr>
<td>
Bořislavka
</td>
<td>
Hradčanská
</td>
<td>
15.09.2013 15:31
</td>
</tr>
<tr>
<td>
Dejvická
</td>
<td>
Letiště
</td>
<td>
15.09.2013 15:31
</td>
</tr>
<tr>
<td>
Florenc
</td>
<td>
Koleje Jižní Město
</td>
<td>
15.09.2013 15:31
</td>
</tr>
<tr>
<td>
Skalka
</td>
<td>
Spořilov
</td>
<td>
15.09.2013 15:31
</td>
</tr>
<tr>
<td>
Depo Hostivař
</td>
<td>
Bezděkovská
</td>
<td>
15.09.2013 15:31
</td>
</tr>
<tr>
<td>
Nádraží Hostivař
</td>
<td>
Tolstého
</td>
<td>
15.09.2013 15:31
</td>
</tr>
<tr>
<td>
Horní Planá
</td>
<td>
Hůrka
</td>
<td>
15.09.2013 15:50
</td>
</tr>
<tr>
<td>
Nádraží Hostivař
</td>
<td>
Tolstého
</td>
<td>
15.09.2013 15:51
</td>
</tr>
<tr>
<td>
Sídliště Čakovice
</td>
<td>
Jesenická
</td>
<td>
15.09.2013 15:51
</td>
</tr>
<tr>
<td>
Chodov
</td>
<td>
Poliklinika Mazurská
</td>
<td>
15.09.2013 15:51
</td>
</tr>
<tr>
<td>
Depo Hostivař
</td>
<td>
Bezděkovská
</td>
<td>
15.09.2013 15:51
</td>
</tr>
<tr>
<td>
Sídliště Spořilov
</td>
<td>
Smíchovské nádraží
</td>
<td>
15.09.2013 15:51
</td>
</tr>
<tr>
<td>
Florenc
</td>
<td>
Skalka
</td>
<td>
15.09.2013 15:51
</td>
</tr>
<tr>
<td>
Skalka
</td>
<td>
Spořilov
</td>
<td>
15.09.2013 15:51
</td>
</tr>
<tr>
<td>
Dejvická
</td>
<td>
Letiště
</td>
<td>
15.09.2013 15:51
</td>
</tr>
<tr>
<td>
Florenc
</td>
<td>
Koleje Jižní Město
</td>
<td>
15.09.2013 15:51
</td>
</tr>
<tr>
<td>
Bořislavka
</td>
<td>
Hradčanská
</td>
<td>
15.09.2013 15:51
</td>
</tr>
<tr>
<td>
Florenc
</td>
<td>
Skalka
</td>
<td>
15.09.2013 16:11
</td>
</tr>
<tr>
<td>
Bořislavka
</td>
<td>
Hradčanská
</td>
<td>
15.09.2013 16:11
</td>
</tr>
<tr>
<td>
Depo Hostivař
</td>
<td>
Bezděkovská
</td>
<td>
15.09.2013 16:11
</td>
</tr>
<tr>
<td>
Skalka
</td>
<td>
Spořilov
</td>
<td>
15.09.2013 16:11
</td>
</tr>
<tr>
<td>
Chodov
</td>
<td>
Poliklinika Mazurská
</td>
<td>
15.09.2013 16:11
</td>
</tr>
<tr>
<td>
Sídliště Spořilov
</td>
<td>
Smíchovské nádraží
</td>
<td>
15.09.2013 16:11
</td>
</tr>
<tr>
<td>
Dejvická
</td>
<td>
Letiště
</td>
<td>
15.09.2013 16:11
</td>
</tr>
<tr>
<td>
Florenc
</td>
<td>
Koleje Jižní Město
</td>
<td>
15.09.2013 16:11
</td>
</tr>
<tr>
<td>
Nádraží Hostivař
</td>
<td>
Tolstého
</td>
<td>
15.09.2013 16:11
</td>
</tr>
<tr>
<td>
Sídliště Čakovice
</td>
<td>
Jesenická
</td>
<td>
15.09.2013 16:11
</td>
</tr>
<tr>
<td>
Florenc
</td>
<td>
Koleje Jižní Město
</td>
<td>
15.09.2013 16:26
</td>
</tr>
<tr>
<td>
Sídliště Čakovice
</td>
<td>
Jesenická
</td>
<td>
15.09.2013 16:26
</td>
</tr>
<tr>
<td>
Dejvická
</td>
<td>
Letiště
</td>
<td>
15.09.2013 16:26
</td>
</tr>
<tr>
<td>
Sídliště Spořilov
</td>
<td>
Smíchovské nádraží
</td>
<td>
15.09.2013 16:26
</td>
</tr>
<tr>
<td>
Florenc
</td>
<td>
Skalka
</td>
<td>
15.09.2013 16:26
</td>
</tr>
<tr>
<td>
Depo Hostivař
</td>
<td>
Bezděkovská
</td>
<td>
15.09.2013 16:26
</td>
</tr>
<tr>
<td>
Nádraží Hostivař
</td>
<td>
Tolstého
</td>
<td>
15.09.2013 16:26
</td>
</tr>
<tr>
<td>
Chodov
</td>
<td>
Poliklinika Mazurská
</td>
<td>
15.09.2013 16:26
</td>
</tr>
<tr>
<td>
Bořislavka
</td>
<td>
Hradčanská
</td>
<td>
15.09.2013 16:26
</td>
</tr>
<tr>
<td>
Skalka
</td>
<td>
Spořilov
</td>
<td>
15.09.2013 16:26
</td>
</tr>
<tr>
<td>
Bořislavka
</td>
<td>
Hradčanská
</td>
<td>
15.09.2013 16:41
</td>
</tr>
<tr>
<td>
Dejvická
</td>
<td>
Letiště
</td>
<td>
15.09.2013 16:41
</td>
</tr>
<tr>
<td>
Sídliště Spořilov
</td>
<td>
Smíchovské nádraží
</td>
<td>
15.09.2013 16:41
</td>
</tr>
<tr>
<td>
Skalka
</td>
<td>
Spořilov
</td>
<td>
15.09.2013 16:41
</td>
</tr>
<tr>
<td>
Nádraží Hostivař
</td>
<td>
Tolstého
</td>
<td>
15.09.2013 16:41
</td>
</tr>
<tr>
<td>
Depo Hostivař
</td>
<td>
Bezděkovská
</td>
<td>
15.09.2013 16:41
</td>
</tr>
<tr>
<td>
Sídliště Čakovice
</td>
<td>
Jesenická
</td>
<td>
15.09.2013 16:41
</td>
</tr>
<tr>
<td>
Chodov
</td>
<td>
Poliklinika Mazurská
</td>
<td>
15.09.2013 16:41
</td>
</tr>
<tr>
<td>
Florenc
</td>
<td>
Skalka
</td>
<td>
15.09.2013 16:41
</td>
</tr>
<tr>
<td>
Florenc
</td>
<td>
Koleje Jižní Město
</td>
<td>
15.09.2013 16:41
</td>
</tr>
<tr>
<td>
Dejvická
</td>
<td>
Letiště
</td>
<td>
15.09.2013 16:56
</td>
</tr>
<tr>
<td>
Bořislavka
</td>
<td>
Hradčanská
</td>
<td>
15.09.2013 16:56
</td>
</tr>
<tr>
<td>
Florenc
</td>
<td>
Koleje Jižní Město
</td>
<td>
15.09.2013 16:56
</td>
</tr>
<tr>
<td>
Florenc
</td>
<td>
Skalka
</td>
<td>
15.09.2013 16:56
</td>
</tr>
<tr>
<td>
Depo Hostivař
</td>
<td>
Bezděkovská
</td>
<td>
15.09.2013 16:56
</td>
</tr>
<tr>
<td>
Nádraží Hostivař
</td>
<td>
Tolstého
</td>
<td>
15.09.2013 16:56
</td>
</tr>
<tr>
<td>
Sídliště Spořilov
</td>
<td>
Smíchovské nádraží
</td>
<td>
15.09.2013 16:56
</td>
</tr>
<tr>
<td>
Sídliště Čakovice
</td>
<td>
Jesenická
</td>
<td>
15.09.2013 16:56
</td>
</tr>
<tr>
<td>
Chodov
</td>
<td>
Poliklinika Mazurská
</td>
<td>
15.09.2013 16:56
</td>
</tr>
<tr>
<td>
Skalka
</td>
<td>
Spořilov
</td>
<td>
15.09.2013 16:56
</td>
</tr>
<tr>
<td>
Skalka
</td>
<td>
Spořilov
</td>
<td>
15.09.2013 17:09
</td>
</tr>
<tr>
<td>
Skalka
</td>
<td>
Spořilov
</td>
<td>
15.09.2013 17:19
</td>
</tr>
<tr>
<td>
Horní Planá
</td>
<td>
Hůrka
</td>
<td>
15.09.2013 18:00
</td>
</tr>
<tr>
<td>
Karlovy Dvory
</td>
<td>
Radislav
</td>
<td>
15.09.2013 18:45
</td>
</tr>
<tr>
<td>
Kyselov
</td>
<td>
Kovářov
</td>
<td>
15.09.2013 19:35
</td>
</tr>
<tr>
<td>
Dolní Vlatavice
</td>
<td>
Kyselov
</td>
<td>
15.09.2013 19:35
</td>
</tr>
<tr>
<td>
Hůrka
</td>
<td>
Jestřabí
</td>
<td>
15.09.2013 22:20
</td>
</tr>
<tr>
<td>
Karlovy Dvory
</td>
<td>
Radislav
</td>
<td>
15.09.2013 23:00
</td>
</tr>
<tr>
<td>
Jenišov
</td>
<td>
Bližší Lhota
</td>
<td>
15.09.2013 23:59
</td>
</tr>
</table>
<p>

92 rows selected.<br>
<br>


SQL&gt; 
<br>
SQL&gt; 
<br>
SQL&gt; 
<br>
SQL&gt; 
<br>
SQL&gt; 	       --KOD DOTAZU: d20
<br>
SQL&gt;  -- Kteří lodníci sloužili na jednotlivých lodích?
<br>
SQL&gt; 
<br>
SQL&gt; select distinct lod.lodid,n.nid
<br>
  2  From lod
<br>
  3  	  left outer join (SELECT distinct NID, LODID FROM POKRYTI
<br>
  4  			    union
<br>
  5  			   SELECT unique NID, id_lod FROM PLAVBA_S_PRUVODCEM) A
<br>
  6  	       on (lod.lodid=A.lodid)
<br>
  7  	  right outer join namornik N on (A.nid=N.nid)
<br>
  8  order by lodid, nid;
<br>
<p>
<table border='1' width='90%' align='center' summary='Script output'>
<tr>
<th scope="col">
LODID
</th>
<th scope="col">
NID
</th>
</tr>
<tr>
<td align="right">
         1
</td>
<td align="right">
         2
</td>
</tr>
<tr>
<td align="right">
         1
</td>
<td align="right">
         6
</td>
</tr>
<tr>
<td align="right">
         1
</td>
<td align="right">
        11
</td>
</tr>
<tr>
<td align="right">
         2
</td>
<td align="right">
         2
</td>
</tr>
<tr>
<td align="right">
         2
</td>
<td align="right">
         3
</td>
</tr>
<tr>
<td align="right">
         2
</td>
<td align="right">
         4
</td>
</tr>
<tr>
<td align="right">
         5
</td>
<td align="right">
         3
</td>
</tr>
<tr>
<td align="right">
         5
</td>
<td align="right">
         9
</td>
</tr>
<tr>
<td align="right">
         5
</td>
<td align="right">
        11
</td>
</tr>
<tr>
<td align="right">
         6
</td>
<td align="right">
         4
</td>
</tr>
<tr>
<td align="right">
         6
</td>
<td align="right">
         7
</td>
</tr>
<tr>
<td align="right">
         6
</td>
<td align="right">
        10
</td>
</tr>
<tr>
<td align="right">
         8
</td>
<td align="right">
         1
</td>
</tr>
<tr>
<td align="right">
         8
</td>
<td align="right">
         8
</td>
</tr>
<tr>
<td align="right">
         9
</td>
<td align="right">
         2
</td>
</tr>
<tr>
<td align="right">
         9
</td>
<td align="right">
         3
</td>
</tr>
<tr>
<td align="right">
         9
</td>
<td align="right">
         9
</td>
</tr>
<tr>
<td align="right">
        10
</td>
<td align="right">
         9
</td>
</tr>
<tr>
<td align="right">
        10
</td>
<td align="right">
        10
</td>
</tr>
<tr>
<td align="right">
&nbsp;
</td>
<td align="right">
         5
</td>
</tr>
<tr>
<td align="right">
&nbsp;
</td>
<td align="right">
        13
</td>
</tr>
</table>
<p>

21 rows selected.<br>
<br>


SQL&gt; 
<br>
SQL&gt; 
<br>
SQL&gt; 
<br>
SQL&gt; 	       --KOD DOTAZU: d21
<br>
SQL&gt;  -- Seznam rezervací včetně lodí, které nebyly rezervovány a zákazníků, kteří si nic nerezervovali.
<br>
SQL&gt; 
<br>
SQL&gt; SELECT REZERVACE.DATUM_RES,
<br>
  2    ZAKAZNIK.ZID,
<br>
  3    ZAKAZNIK.JMENOZ,
<br>
  4    ZAKAZNIK.PRIJMENI,
<br>
  5    ZAKAZNIK.CREDITLIMIT,
<br>
  6    ZAKAZNIK.ADRESA,
<br>
  7    LOD.LODID,
<br>
  8    LOD.JMENOL,
<br>
  9    LOD.BARVA,
<br>
 10    LOD.LTYP,
<br>
 11    LOD.POCET_MIST
<br>
 12  FROM ZAKAZNIK LEFT OUTER JOIN REZERVACE ON ZAKAZNIK.ZID = REZERVACE.ZID
<br>
 13  	  FULL OUTER JOIN LOD ON LOD.LODID = REZERVACE.LODID
<br>
 14  order by datum_res, zakaznik.prijmeni,zakaznik.jmenoz,lod.jmenol;
<br>
<p>
<table border='1' width='90%' align='center' summary='Script output'>
<tr>
<th scope="col">
DATUM_RES
</th>
<th scope="col">
ZID
</th>
<th scope="col">
JMENOZ
</th>
<th scope="col">
PRIJMENI
</th>
<th scope="col">
CREDITLIMIT
</th>
<th scope="col">
ADRESA
</th>
<th scope="col">
LODID
</th>
<th scope="col">
JMENOL
</th>
<th scope="col">
BARVA
</th>
<th scope="col">
LTYP
</th>
<th scope="col">
POCET_MIST
</th>
</tr>
<tr>
<td>
24.12.2000 00:00
</td>
<td align="right">
         9
</td>
<td>
Adams
</td>
<td>
Adams
</td>
<td align="right">
       550
</td>
<td>
Adamsovice
</td>
<td align="right">
         2
</td>
<td>
Mariane
</td>
<td>
modrá
</td>
<td>
klipr
</td>
<td align="right">
        50
</td>
</tr>
<tr>
<td>
24.12.2000 00:00
</td>
<td align="right">
         1
</td>
<td>
Ford
</td>
<td>
Ford
</td>
<td align="right">
       100
</td>
<td>
Fordovice 10
</td>
<td align="right">
         8
</td>
<td>
Charibda
</td>
<td>
modrá
</td>
<td>
parník
</td>
<td align="right">
       145
</td>
</tr>
<tr>
<td>
24.12.2000 00:00
</td>
<td align="right">
         6
</td>
<td>
Martin
</td>
<td>
Martin
</td>
<td align="right">
       330
</td>
<td>
Martinovice 10
</td>
<td align="right">
         1
</td>
<td>
Chloe
</td>
<td>
žlutá
</td>
<td>
ponorka
</td>
<td align="right">
       100
</td>
</tr>
<tr>
<td>
24.12.2000 00:00
</td>
<td align="right">
         7
</td>
<td>
Scott
</td>
<td>
Scott
</td>
<td align="right">
       400
</td>
<td>
Scottovice
</td>
<td align="right">
         7
</td>
<td>
Yeanifer
</td>
<td>
černá
</td>
<td>
parník
</td>
<td align="right">
       110
</td>
</tr>
<tr>
<td>
01.01.2001 00:00
</td>
<td align="right">
         1
</td>
<td>
Ford
</td>
<td>
Ford
</td>
<td align="right">
       100
</td>
<td>
Fordovice 10
</td>
<td align="right">
         8
</td>
<td>
Charibda
</td>
<td>
modrá
</td>
<td>
parník
</td>
<td align="right">
       145
</td>
</tr>
<tr>
<td>
01.01.2001 00:00
</td>
<td align="right">
         6
</td>
<td>
Martin
</td>
<td>
Martin
</td>
<td align="right">
       330
</td>
<td>
Martinovice 10
</td>
<td align="right">
         8
</td>
<td>
Charibda
</td>
<td>
modrá
</td>
<td>
parník
</td>
<td align="right">
       145
</td>
</tr>
<tr>
<td>
01.01.2001 00:00
</td>
<td align="right">
         6
</td>
<td>
Martin
</td>
<td>
Martin
</td>
<td align="right">
       330
</td>
<td>
Martinovice 10
</td>
<td align="right">
         1
</td>
<td>
Chloe
</td>
<td>
žlutá
</td>
<td>
ponorka
</td>
<td align="right">
       100
</td>
</tr>
<tr>
<td>
01.01.2001 00:00
</td>
<td align="right">
         6
</td>
<td>
Martin
</td>
<td>
Martin
</td>
<td align="right">
       330
</td>
<td>
Martinovice 10
</td>
<td align="right">
        10
</td>
<td>
Lilien
</td>
<td>
modrá
</td>
<td>
klipr
</td>
<td align="right">
        10
</td>
</tr>
<tr>
<td>
01.01.2001 00:00
</td>
<td align="right">
         6
</td>
<td>
Martin
</td>
<td>
Martin
</td>
<td align="right">
       330
</td>
<td>
Martinovice 10
</td>
<td align="right">
         2
</td>
<td>
Mariane
</td>
<td>
modrá
</td>
<td>
klipr
</td>
<td align="right">
        50
</td>
</tr>
<tr>
<td>
01.01.2001 00:00
</td>
<td align="right">
         6
</td>
<td>
Martin
</td>
<td>
Martin
</td>
<td align="right">
       330
</td>
<td>
Martinovice 10
</td>
<td align="right">
         4
</td>
<td>
Pooh
</td>
<td>
hnědá
</td>
<td>
plachetnice
</td>
<td align="right">
        20
</td>
</tr>
<tr>
<td>
01.01.2001 00:00
</td>
<td align="right">
         6
</td>
<td>
Martin
</td>
<td>
Martin
</td>
<td align="right">
       330
</td>
<td>
Martinovice 10
</td>
<td align="right">
         5
</td>
<td>
Shark
</td>
<td>
pink
</td>
<td>
ponorka
</td>
<td align="right">
        22
</td>
</tr>
<tr>
<td>
01.01.2001 00:00
</td>
<td align="right">
         6
</td>
<td>
Martin
</td>
<td>
Martin
</td>
<td align="right">
       330
</td>
<td>
Martinovice 10
</td>
<td align="right">
         3
</td>
<td>
Skyla
</td>
<td>
černá
</td>
<td>
ponorka
</td>
<td align="right">
        30
</td>
</tr>
<tr>
<td>
01.01.2001 00:00
</td>
<td align="right">
         6
</td>
<td>
Martin
</td>
<td>
Martin
</td>
<td align="right">
       330
</td>
<td>
Martinovice 10
</td>
<td align="right">
         7
</td>
<td>
Yeanifer
</td>
<td>
černá
</td>
<td>
parník
</td>
<td align="right">
       110
</td>
</tr>
<tr>
<td>
01.01.2001 00:00
</td>
<td align="right">
         7
</td>
<td>
Scott
</td>
<td>
Scott
</td>
<td align="right">
       400
</td>
<td>
Scottovice
</td>
<td align="right">
         5
</td>
<td>
Shark
</td>
<td>
pink
</td>
<td>
ponorka
</td>
<td align="right">
        22
</td>
</tr>
<tr>
<td>
&nbsp;
</td>
<td align="right">
         4
</td>
<td>
Allen
</td>
<td>
Allen
</td>
<td align="right">
       300
</td>
<td>
Allenovice 10
</td>
<td align="right">
&nbsp;
</td>
<td>
&nbsp;
</td>
<td>
&nbsp;
</td>
<td>
&nbsp;
</td>
<td align="right">
&nbsp;
</td>
</tr>
<tr>
<td>
&nbsp;
</td>
<td align="right">
         3
</td>
<td>
Blake
</td>
<td>
Blake
</td>
<td align="right">
       120
</td>
<td>
Blakeovice 10
</td>
<td align="right">
&nbsp;
</td>
<td>
&nbsp;
</td>
<td>
&nbsp;
</td>
<td>
&nbsp;
</td>
<td align="right">
&nbsp;
</td>
</tr>
<tr>
<td>
&nbsp;
</td>
<td align="right">
        10
</td>
<td>
James
</td>
<td>
James
</td>
<td align="right">
      1000
</td>
<td>
Jamesovice
</td>
<td align="right">
&nbsp;
</td>
<td>
&nbsp;
</td>
<td>
&nbsp;
</td>
<td>
&nbsp;
</td>
<td align="right">
&nbsp;
</td>
</tr>
<tr>
<td>
&nbsp;
</td>
<td align="right">
        12
</td>
<td>
Odysseus
</td>
<td>
Laertiadés 
</td>
<td align="right">
      1700
</td>
<td>
Ithaka 1
</td>
<td align="right">
&nbsp;
</td>
<td>
&nbsp;
</td>
<td>
&nbsp;
</td>
<td>
&nbsp;
</td>
<td align="right">
&nbsp;
</td>
</tr>
<tr>
<td>
&nbsp;
</td>
<td align="right">
         2
</td>
<td>
Smith
</td>
<td>
Smith
</td>
<td align="right">
       110
</td>
<td>
Smithovice 10
</td>
<td align="right">
&nbsp;
</td>
<td>
&nbsp;
</td>
<td>
&nbsp;
</td>
<td>
&nbsp;
</td>
<td align="right">
&nbsp;
</td>
</tr>
<tr>
<td>
&nbsp;
</td>
<td align="right">
        11
</td>
<td>
Iásón
</td>
<td>
Syn Krétheův
</td>
<td align="right">
      1500
</td>
<td>
Iólkos
</td>
<td align="right">
&nbsp;
</td>
<td>
&nbsp;
</td>
<td>
&nbsp;
</td>
<td>
&nbsp;
</td>
<td align="right">
&nbsp;
</td>
</tr>
<tr>
<td>
&nbsp;
</td>
<td align="right">
         8
</td>
<td>
Turner
</td>
<td>
Turner
</td>
<td align="right">
       440
</td>
<td>
Turnerovice
</td>
<td align="right">
&nbsp;
</td>
<td>
&nbsp;
</td>
<td>
&nbsp;
</td>
<td>
&nbsp;
</td>
<td align="right">
&nbsp;
</td>
</tr>
<tr>
<td>
&nbsp;
</td>
<td align="right">
         5
</td>
<td>
Ward
</td>
<td>
Ward
</td>
<td align="right">
       310
</td>
<td>
Wardovice 10
</td>
<td align="right">
&nbsp;
</td>
<td>
&nbsp;
</td>
<td>
&nbsp;
</td>
<td>
&nbsp;
</td>
<td align="right">
&nbsp;
</td>
</tr>
<tr>
<td>
&nbsp;
</td>
<td align="right">
&nbsp;
</td>
<td>
&nbsp;
</td>
<td>
&nbsp;
</td>
<td align="right">
&nbsp;
</td>
<td>
&nbsp;
</td>
<td align="right">
        11
</td>
<td>
Anička
</td>
<td>
růžová
</td>
<td>
plachetnice
</td>
<td align="right">
        10
</td>
</tr>
<tr>
<td>
&nbsp;
</td>
<td align="right">
&nbsp;
</td>
<td>
&nbsp;
</td>
<td>
&nbsp;
</td>
<td align="right">
&nbsp;
</td>
<td>
&nbsp;
</td>
<td align="right">
         9
</td>
<td>
Anne
</td>
<td>
zelená
</td>
<td>
&nbsp;
</td>
<td align="right">
       100
</td>
</tr>
<tr>
<td>
&nbsp;
</td>
<td align="right">
&nbsp;
</td>
<td>
&nbsp;
</td>
<td>
&nbsp;
</td>
<td align="right">
&nbsp;
</td>
<td>
&nbsp;
</td>
<td align="right">
         6
</td>
<td>
Carmen
</td>
<td>
zelená
</td>
<td>
klipr
</td>
<td align="right">
       100
</td>
</tr>
<tr>
<td>
&nbsp;
</td>
<td align="right">
&nbsp;
</td>
<td>
&nbsp;
</td>
<td>
&nbsp;
</td>
<td align="right">
&nbsp;
</td>
<td>
&nbsp;
</td>
<td align="right">
        13
</td>
<td>
LodProPriklad7.1
</td>
<td>
zrzavá
</td>
<td>
typProPriklad7
</td>
<td align="right">
        25
</td>
</tr>
<tr>
<td>
&nbsp;
</td>
<td align="right">
&nbsp;
</td>
<td>
&nbsp;
</td>
<td>
&nbsp;
</td>
<td align="right">
&nbsp;
</td>
<td>
&nbsp;
</td>
<td align="right">
        14
</td>
<td>
LodProPriklad7.2
</td>
<td>
zelená
</td>
<td>
typProPriklad7
</td>
<td align="right">
        25
</td>
</tr>
</table>
<p>

27 rows selected.<br>
<br>


SQL&gt; 
<br>
SQL&gt; 
<br>
SQL&gt; 	       --KOD DOTAZU: d22
<br>
SQL&gt;  -- Seznam linek, které jsou pokryty pouze autobusem SPZ101
<br>
SQL&gt; 
<br>
SQL&gt; -- Seznam linek, které jsou pokryty pouze autobusem SPZ101
<br>
SQL&gt; SELECT distinct LINKA.LID, STRT,CIL
<br>
  2  FROM LINKA
<br>
  3  		INNER JOIN SPOJ ON LINKA.LID = SPOJ.LID
<br>
  4  		INNER JOIN POKRYTI ON SPOJ.LID	= POKRYTI.LID
<br>
  5  				      AND SPOJ.SPID = POKRYTI.SPID
<br>
  6  		INNER JOIN AUTOBUS ON AUTOBUS.INV_CISLO = POKRYTI.INV_CISLO
<br>
  7  				      AND SPZ='SPZ101'
<br>
  8  MINUS
<br>
  9  SELECT distinct LINKA.LID, STRT,CIL
<br>
 10  FROM LINKA
<br>
 11  		INNER JOIN SPOJ ON LINKA.LID = SPOJ.LID
<br>
 12  		INNER JOIN POKRYTI ON SPOJ.LID	  = POKRYTI.LID
<br>
 13  				      AND SPOJ.SPID = POKRYTI.SPID
<br>
 14  		INNER JOIN AUTOBUS ON AUTOBUS.INV_CISLO = POKRYTI.INV_CISLO
<br>
 15  				      AND SPZ != 'SPZ101';
<br>

no rows selected

<br>
SQL&gt; 
<br>
SQL&gt; 
<br>
SQL&gt; 
<br>
SQL&gt; 	       --KOD DOTAZU: d23
<br>
SQL&gt;  -- Seznam namorniku, kteri jsou volni dne 23.09.2013 od 8 do 14 hod.
<br>
SQL&gt; 
<br>
SQL&gt; 
<br>
SQL&gt; alter session set nls_date_format = 'dd.mm.yyyy hh24:mi';
<br>

Session altered.<br>
<br>


SQL&gt; select *
<br>
  2  from namornik
<br>
  3  where nid in ( select distinct nid
<br>
  4  		    from kalendar_namornika
<br>
  5  		    where od not in ('23.09.2013 08:00', '23.09.2013 14:00')
<br>
  6  		  );
<br>
<p>
<table border='1' width='90%' align='center' summary='Script output'>
<tr>
<th scope="col">
NID
</th>
<th scope="col">
JMENON
</th>
<th scope="col">
VEK
</th>
<th scope="col">
HODNOST
</th>
<th scope="col">
PLAT
</th>
</tr>
<tr>
<td align="right">
         1
</td>
<td>
Dustin
</td>
<td align="right">
        45
</td>
<td>
7
</td>
<td align="right">
      7000
</td>
</tr>
<tr>
<td align="right">
         2
</td>
<td>
Lubber
</td>
<td align="right">
        55
</td>
<td>
8
</td>
<td align="right">
      3000
</td>
</tr>
<tr>
<td align="right">
         3
</td>
<td>
Rusty
</td>
<td align="right">
        35
</td>
<td>
10
</td>
<td align="right">
      6000
</td>
</tr>
<tr>
<td align="right">
         4
</td>
<td>
Yuppy
</td>
<td align="right">
        35
</td>
<td>
9
</td>
<td align="right">
      2000
</td>
</tr>
<tr>
<td align="right">
         6
</td>
<td>
Zorba
</td>
<td align="right">
        16
</td>
<td>
10
</td>
<td align="right">
      7500
</td>
</tr>
<tr>
<td align="right">
         7
</td>
<td>
Horatio
</td>
<td align="right">
        35
</td>
<td>
7
</td>
<td align="right">
      2500
</td>
</tr>
<tr>
<td align="right">
         8
</td>
<td>
Brutus
</td>
<td align="right">
        33
</td>
<td>
1
</td>
<td align="right">
      1350
</td>
</tr>
<tr>
<td align="right">
         9
</td>
<td>
Marco
</td>
<td align="right">
        26
</td>
<td>
2
</td>
<td align="right">
      5200
</td>
</tr>
<tr>
<td align="right">
        10
</td>
<td>
John
</td>
<td align="right">
       118
</td>
<td>
6
</td>
<td align="right">
     14000
</td>
</tr>
<tr>
<td align="right">
        11
</td>
<td>
Charon
</td>
<td align="right">
       999
</td>
<td>
4
</td>
<td align="right">
      7820
</td>
</tr>
</table>
<p>

10 rows selected.<br>
<br>


SQL&gt; 
<br>
SQL&gt; 
<br>
SQL&gt; 
<br>
SQL&gt; 	       --KOD DOTAZU: d24
<br>
SQL&gt;  -- Seznam lodi, ktere jsou volne dne 23.09.2013 od 8 do 14 hod. a maji kapacitu od 10 do 25 mist.
<br>
SQL&gt; 
<br>
SQL&gt; 
<br>
SQL&gt; alter session set nls_date_format = 'dd.mm.yyyy hh24:mi';
<br>

Session altered.<br>
<br>


SQL&gt; select distinct lodid
<br>
  2  from lod l1
<br>
  3  where lodid not in (select lodid
<br>
  4  			 from rezervace
<br>
  5  			 where datum_res = '23.09.2013')
<br>
  6  	   and not exists (select lodid
<br>
  7  			   from pokryti p
<br>
  8  			   where l1.lodid = p.lodid
<br>
  9  				 and p.DATUM_POKRYTI = '23.09.2013'
<br>
 10  				 and ( p.od    in ('23.09.2013 08:00', '23.09.2013 14:00')
<br>
 11  				       or p.do in ('23.09.2013 08:00', '23.09.2013 14:00')
<br>
 12  				     )
<br>
 13  			  )
<br>
 14  	   and l1.pocet_mist in (10,25);
<br>
<p>
<table border='1' width='90%' align='center' summary='Script output'>
<tr>
<th scope="col">
LODID
</th>
</tr>
<tr>
<td align="right">
        13
</td>
</tr>
<tr>
<td align="right">
        14
</td>
</tr>
<tr>
<td align="right">
        10
</td>
</tr>
<tr>
<td align="right">
        11
</td>
</tr>
</table>
<p>

SQL&gt; 
<br>
SQL&gt; 
<br>
SQL&gt; 
<br>
SQL&gt; 	       --KOD DOTAZU: d25
<br>
SQL&gt;  -- Pridejte novou plavbu s pruvodcem pro zakaznika s prijmenim Scott na 23.09.2013 od 8 do 14 hod.
<br>
SQL&gt; 
<br>
SQL&gt;  -- Nasaďte na to lod, ktera je na tu dobu volna a ma kapacitu 10 až 25 míst.
<br>
SQL&gt; 
<br>
SQL&gt;  -- Nasaďte na to kterehokoliv námornika, který je na tuto dobu volný.
<br>
SQL&gt; 
<br>
SQL&gt; 
<br>
SQL&gt; alter session set nls_date_format = 'dd.mm.yyyy hh24:mi';
<br>

Session altered.<br>
<br>


SQL&gt; -- set autocommit off
<br>
SQL&gt; -- nejdrive je nutne vyplnit kalendar namornika
<br>
SQL&gt; INSERT
<br>
  2  INTO KALENDAR_NAMORNIKA (NID,OD,DO)
<br>
  3  VALUES( (select  nid
<br>
  4  	      from kalendar_namornika
<br>
  5  	      where od not in ('23.09.2013 08:00', '23.09.2013 14:00')
<br>
  6  		    and rownum =1
<br>
  7  	     ),
<br>
  8  	     '23.09.2013 08:00',
<br>
  9  	     '23.09.2013 14:00'
<br>
 10  	   );
<br>

1 row created.<br>
<br>


Commit complete.
<br>
SQL&gt; -- zaplanovani plavby
<br>
SQL&gt; INSERT
<br>
  2  INTO PLAVBA_S_PRUVODCEM( NID,OD,DO,ID_LOD,ZID)
<br>
  3  VALUES ( (select  nid
<br>
  4  	       from kalendar_namornika
<br>
  5  	       where od ='23.09.2013 08:00' and do= '23.09.2013 14:00'
<br>
  6  		     and rownum=1
<br>
  7  	      ),
<br>
  8  	      '23.09.2013 08:00',
<br>
  9  	      '23.09.2013 14:00',
<br>
 10  	      ( select distinct lodid
<br>
 11  		from lod l1
<br>
 12  		where lodid not in ( select lodid
<br>
 13  				     from rezervace
<br>
 14  				     where datum_res = '23.09.2013')
<br>
 15  		      and not exists ( select lodid
<br>
 16  				       from pokryti p
<br>
 17  				       where l1.lodid = p.lodid
<br>
 18  					     and p.DATUM_POKRYTI = '23.09.2013'
<br>
 19  					     and (    p.od in ('23.09.2013 08:00', '23.09.2013 14:00')
<br>
 20  						   or p.do in ('23.09.2013 08:00', '23.09.2013 14:00')
<br>
 21  						 )
<br>
 22  				     )
<br>
 23  		      and l1.pocet_mist in (10,25)
<br>
 24  		      and rownum = 1
<br>
 25  	      ),
<br>
 26  	      ( SELECT ZID
<br>
 27  		FROM ZAKAZNIK
<br>
 28  		WHERE prijmeni='Scott' and jmenoz='Scott' and rownum=1
<br>
 29  	      )
<br>
 30  	    );
<br>

1 row created.<br>
<br>


Commit complete.
<br>
SQL&gt; rollback;
<br>

Rollback complete.<br>
<br>


SQL&gt; 
<br>
SQL&gt; 
<br>
SQL&gt; 
<br>
SQL&gt; set markup html off
<br>
SQL> spool off
</body>
</html>
